;(function($){$.fn.prize=function(options){var ops=$.extend({ga:"3",gamark:"./image/gua_image.jpg",gamarkW:"315",gamarkH:"153",gaimg:"./image/07.jpg",gaimgW:"315",gaimgH:"153",err:"./image/wuyu.png"},options);var str='<img id="gua_img" src='+ops.gamark+' style="position: absolute;"><canvas  style="position:absolute; z-index:55;"><img src='+ops.err+' style="position: absolute;"></canvas>';$(this).append(str);var gua=ops.ga;var imgSrc=ops.gaimg;var body_width=$(window).width();var body_height=$(window).height();$("#gua_img").width(ops.gamarkW).height(ops.gamarkH);var height=ops.gaimgH;var width=ops.gaimgW;if(gua>=0){bodys(height,width)};function bodys(height,width){var img=new Image();var canvas=document.querySelector('canvas');canvas.style.position='absolute';img.addEventListener('load',function(e){var ctx;var w=width,h=height;var offsetX=canvas.offsetLeft,offsetY=canvas.offsetTop;var mousedown=false;function eventDown(e){e.preventDefault();mousedown=true};function eventUp(e){e.preventDefault();mousedown=false};function eventMove(e){e.preventDefault();if(mousedown){if(e.changedTouches){e=e.changedTouches[e.changedTouches.length-1]};var x=(e.clientX+document.body.scrollLeft||e.pageX)-offsetX||0,y=(e.clientY+document.body.scrollTop||e.pageY)-offsetY||0;with(ctx){beginPath();arc(x,y,15,0,Math.PI*2);fill()}}}canvas.width=w;canvas.height=h;canvas.style.backgroundImage='url('+img.src+')';ctx=canvas.getContext('2d');var bg=new Image();bg.src=ops.gamark;ctx.drawImage(bg,0,0);ctx.globalCompositeOperation='destination-out';canvas.addEventListener('touchstart',eventDown);canvas.addEventListener('touchend',eventUp);canvas.addEventListener('touchmove',eventMove);canvas.addEventListener('mousedown',eventDown);canvas.addEventListener('mouseup',eventUp);canvas.addEventListener('mousemove',eventMove)});img.src=imgSrc;(document.body.style)}}})(jQuery)